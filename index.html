<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Collection Tracker</title>
  <meta name="theme-color" content="#7c3aed" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand" id="btnHomeBrand" title="–ù–∞ –≥–ª–∞–≤–Ω—É—é">
      <div class="logo" aria-hidden="true">‚ú¶</div>
      <div>
        <div class="title">Collection Tracker</div>
        <div class="subtitle">–û—Ç–∫—Ä—ã—Ç–∫–∏ ‚Ä¢ –æ–±–º–µ–Ω—ã ‚Ä¢ –ø–æ–ª—É—á–µ–Ω–∏–µ</div>
      </div>
    </div>
    <div class="topbar-actions">
      <button id="btnHome" class="btn ghost" title="–ì–ª–∞–≤–Ω–∞—è">–ì–ª–∞–≤–Ω–∞—è</button>
      <button id="btnExport" class="btn ghost" title="–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ JSON">–≠–∫—Å–ø–æ—Ä—Ç</button>
      <label class="btn ghost file">
        –ò–º–ø–æ—Ä—Ç
        <input id="fileImport" type="file" accept="application/json" />
      </label>
      <button id="btnAbout" class="btn ghost" title="–°–ø—Ä–∞–≤–∫–∞">?</button>
    </div>
  </header>

  <main class="app">
    <aside class="sidebar">
      <div class="panel">
        <div class="panel-head">
          <div class="panel-title">–°–µ—Ä–∏–∏</div>
          <button id="btnNewSeries" class="btn primary">Ôºã –î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
        <div id="seriesList" class="series-list" role="list"></div>
        <div class="hint">
          <div class="hint-title">–ë—ã—Å—Ç—Ä–æ</div>
          <ol>
            <li>–°–æ–∑–¥–∞–π —Å–µ—Ä–∏—é.</li>
            <li>–î–æ–±–∞–≤—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—ç—Ç–æ –±—É–¥–µ—Ç <b>–ß–∞—Å—Ç—å 1</b>).</li>
            <li>–í—ã–¥–µ–ª—è–π –æ—Ç–∫—Ä—ã—Ç–∫–∏ —Ä–∞–º–∫–æ–π, –æ—Ç–º–µ—á–∞–π —Å—Ç–∞—Ç—É—Å –∏ –¥–æ–±–∞–≤–ª—è–π –ø—Ä–∏–º–µ—á–∞–Ω–∏—è.</li>
          </ol>
          <div class="hint-small">–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (IndexedDB). –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç ‚Äî –¥–ª—è –±—ç–∫–∞–ø–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å–∞.</div>
        </div>
      </div>
    </aside>

    <section class="workspace">
      <div id="homeView" class="home">
        <div class="home-head">
          <div>
            <div class="home-title">–ú–æ–∏ —Å–µ—Ä–∏–∏</div>
            <div class="home-sub">–ö–ª–∏–∫–Ω–∏ –Ω–∞ —Å–µ—Ä–∏—é, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å. –ü—Ä–æ–≥—Ä–µ—Å—Å —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ –æ—Ç–º–µ—á–µ–Ω–Ω—ã–º –æ—Ç–∫—Ä—ã—Ç–∫–∞–º.</div>
          </div>
          <button id="btnNewSeries2" class="btn primary">Ôºã –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–∏—é</button>
        </div>
        <div id="homeGrid" class="home-grid"></div>
        <div id="homeEmpty" class="home-empty hidden">
          <div class="empty-card">
            <div class="empty-title">–î–æ–±–∞–≤—å –ø–µ—Ä–≤—É—é —Å–µ—Ä–∏—é</div>
            <div class="empty-text">–¢—Ä–µ–∫–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å–∞–π—Ç. –ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –ø–æ —Å—Å—ã–ª–∫–µ GitHub Pages.</div>
            <button id="btnNewSeries3" class="btn primary">Ôºã –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–∏—é</button>
          </div>
        </div>
      </div>

      <div id="seriesView" class="series-view hidden">
        <div class="series-toolbar">
          <div class="series-toolbar-left">
            <input id="seriesName" class="series-name" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–∏–∏" />
            <div class="series-stats" id="seriesStats">‚Äî</div>
            <div class="part-picker">
              <select id="partSelect" class="select"></select>
            </div>
          </div>

          <div class="series-toolbar-right">
            <div class="series-actions">
              <label class="btn">
                Ôºã –î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                <input id="fileImage" type="file" accept="image/*" multiple />
              </label>

              <button id="btnUndo" class="btn ghost" title="–£–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤ —Ç–µ–∫—É—â–µ–π —á–∞—Å—Ç–∏">‚Ü∂ –û—Ç–º–µ–Ω–∏—Ç—å</button>
              <button id="btnDeletePart" class="btn danger ghost" title="–£–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â—É—é —á–∞—Å—Ç—å">–£–¥–∞–ª–∏—Ç—å —á–∞—Å—Ç—å</button>
              <button id="btnDeleteSeries" class="btn danger ghost" title="–£–¥–∞–ª–∏—Ç—å —Å–µ—Ä–∏—é">–£–¥–∞–ª–∏—Ç—å —Å–µ—Ä–∏—é</button>
            </div>
          </div>
        </div>

        <div class="board">
          <div class="leftcol" id="seriesLeftcol">
            <div class="dropzone" id="dropzone">
              <div class="dropzone-title">–ü–µ—Ä–µ—Ç–∞—â–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏ ¬´–î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ¬ª</div>
              <div class="dropzone-sub">–ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤.</div>
            </div>
            <div class="canvas-wrap">
              <button id="btnViewImage" class="image-view-btn" type="button" title="–û—Ç–∫—Ä—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">üîç</button>
              <canvas id="canvas" width="1200" height="800"></canvas>
            </div>

            <div class="canvas-help" id="canvasHelp">
              <div><b>–í—ã–¥–µ–ª–µ–Ω–∏–µ:</b> –ø–æ—Ç—è–Ω–∏ —Ä–∞–º–∫—É –ø–æ –æ—Ç–∫—Ä—ã—Ç–∫–µ (–º—ã—à–∫–æ–π –∏–ª–∏ –ø–∞–ª—å—Ü–µ–º).</div>
              <div><b>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:</b> –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ —É–¥–∞–ª–∏—Ç—å/–ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å (–≤—ã–¥–µ–ª–∏ –∑–∞–Ω–æ–≤–æ).</div>
            </div>
          </div>

          <div class="cards">
            <div class="cards-head">
              <div class="cards-title">–û—Ç–∫—Ä—ã—Ç–∫–∏</div>

              <div class="cards-controls">
                <div class="chips">
                  <button class="chip active" data-filter="all">–í—Å–µ</button>
                  <button class="chip" data-filter="trade">–û–±–º–µ–Ω –Ω–∞–π–¥–µ–Ω</button>
                  <button class="chip" data-filter="received">–ü–æ–ª—É—á–µ–Ω–æ</button>
                  <button class="chip" data-filter="pending">–ñ–¥—É</button>
                </div>

                <div class="cards-controls-right">
                  <div class="part-filter">
                    <span class="part-filter-label">–§–∏–ª—å—Ç—Ä: –ß–∞—Å—Ç—å</span>
                    <select id="partFilter" class="select"></select>
                  </div>
                  <div class="toggle-all">
                    <button id="toggleAllTrade" class="btn ghost tiny" type="button">Toggle all: –û–±–º–µ–Ω –Ω–∞–π–¥–µ–Ω</button>
                    <button id="toggleAllReceived" class="btn ghost tiny" type="button">Toggle all: –ü–æ–ª—É—á–µ–Ω–æ</button>
                  </div>
                </div>
              </div>
            </div>

            <div id="cardsList" class="cards-list"></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <dialog id="dlgNewSeries" class="dialog">
    <form method="dialog" class="dialog-card">
      <div class="dialog-title">–ù–æ–≤–∞—è —Å–µ—Ä–∏—è</div>
      <label class="field">
        <span>–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span>
        <input id="newSeriesName" type="text" placeholder="–ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º" />
      </label>
      <div class="dialog-actions">
        <button class="btn ghost" value="cancel" formnovalidate>–û—Ç–º–µ–Ω–∞</button>
        <button id="btnCreateSeries" class="btn primary" value="ok">–°–æ–∑–¥–∞—Ç—å</button>
      </div>
      <div class="dialog-small">–ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∑–∂–µ.</div>
    </form>
  </dialog>

  <dialog id="dlgConfirm" class="dialog">
    <form method="dialog" class="dialog-card">
      <div class="dialog-title" id="confirmTitle">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</div>
      <div class="dialog-text" id="confirmText">‚Äî</div>
      <div class="dialog-actions">
        <button class="btn ghost" value="cancel" formnovalidate>–û—Ç–º–µ–Ω–∞</button>
        <button class="btn danger" id="confirmOk" value="ok">–£–¥–∞–ª–∏—Ç—å</button>
      </div>
    </form>
  </dialog>

  <dialog id="dlgAbout" class="dialog">
    <form method="dialog" class="dialog-card">
      <div class="dialog-title">–°–ø—Ä–∞–≤–∫–∞</div>
      <div class="dialog-text">
        <p><b>–ß–∞—Å—Ç–∏:</b> –≤ –æ–¥–Ω–æ–π —Å–µ—Ä–∏–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ß–∞—Å—Ç—å 1, –ß–∞—Å—Ç—å 2...).</p>
        <p><b>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ–∫:</b> –ø–æ—Ç—è–Ω–∏ —Ä–∞–º–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ ‚Äî –ø–æ—è–≤–∏—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å–ø—Ä–∞–≤–∞.</p>
        <p><b>–î–∞–Ω–Ω—ã–µ:</b> —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (IndexedDB). –î–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π –≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç.</p>
      </div>
      <div class="dialog-actions">
        <button class="btn primary" value="ok">–û–∫</button>
      </div>
    </form>
  </dialog>

  <dialog id="dlgImageViewer" class="dialog dialog-viewer">
    <div class="viewer-card">
      <div class="viewer-toolbar">
        <div class="viewer-title">–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
        <button id="viewerClose" class="btn ghost tiny" type="button">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div id="viewerStage" class="viewer-stage">
        <img id="viewerImage" alt="–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Ä–∏–∏" />
      </div>
    </div>
  </dialog>

  <dialog id="dlgCoverPos" class="dialog dialog-cover">
    <div class="dialog-card cover-dialog">
      <div class="dialog-title">–ü–æ–∑–∏—Ü–∏—è –æ–±–ª–æ–∂–∫–∏</div>
      <div class="cover-frame" id="coverFrame">
        <img id="coverFrameImage" alt="–û–±–ª–æ–∂–∫–∞ —Å–µ—Ä–∏–∏" />
      </div>
      <div class="dialog-actions">
        <button id="coverReset" class="btn ghost" type="button">–°–±—Ä–æ—Å–∏—Ç—å</button>
        <button id="coverCancel" class="btn ghost" type="button">–û—Ç–º–µ–Ω–∞</button>
        <button id="coverSave" class="btn primary" type="button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
      <div class="dialog-small">–ü–µ—Ä–µ—Ç—è–Ω–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –≤–∏–¥–∏–º—É—é –æ–±–ª–∞—Å—Ç—å.</div>
    </div>
  </dialog>

  <script src="app.js" type="module"></script>
  <div class="version-badge" id="versionBadge">v4.1.5</div>
</body>
</html>
